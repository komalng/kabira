<div class="col-12">
</div>

<div class="contents">
  {{#each videos}}
  <div class="col-md-4 quarter card text-center" style="border: none;">
    <div style="position: relative;" id="{{this.video_id}}">
      <!-- data-fancybox href="https://www.youtube.com/watch?v={{this.video_id}}&autoplay=1" -->
      <div onclick="playVideoCustom('{{this.video_id}}')">
        <img class="card-img-top img-fluid" src="https://img.youtube.com/vi/{{this.video_id}}/mqdefault.jpg">
        <img src="{{root}}assets/img/playicon.png" class="playicon" />
      </div>
    </div>
    <div class="card-body" style="background-color: #eee;">
      <p class="card-text">
        {{this.description}}
      </p>
    </div>
  </div>
  {{/each}}
</div>

<script src="//www.youtube.com/iframe_api"></script>

<script>
  // https://developers.google.com/youtube/iframe_api_reference

  var player, timer;

  function playVideoCustom(video_id) {
    player = new YT.Player(video_id, {
      height: $('#zRuOAjnY5aQ').height(),
      width: $('#zRuOAjnY5aQ').width(),
      videoId: video_id,
      playerVars: {
        autoplay: 1,
        origin: window.location.origin,
        autohide: 1,
        host: `${window.location.protocol}//www.youtube.com`
      },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
    // player.cueVideoById(video_id, 0);
  }

  function myTimer() {
    player.playVideo();
  }

  function onPlayerReady(event) {
    player.setVolume(100);
    player.playVideo();
    timer = setInterval(myTimer, 2000);
  }

  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING) {
      clearInterval(timer);
      console.log("cleared interval");
    };

    //     // currentVideoId++;
    //     // change it
    //     if (currentVideoId < videoIDs.length) {
    //         player.loadVideoById(currentVideoId);
    //     }
    // }
  }
</script>